(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const u of s)if(u.type==="childList")for(const i of u.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const u={};return s.integrity&&(u.integrity=s.integrity),s.referrerPolicy&&(u.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?u.credentials="include":s.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(s){if(s.ep)return;s.ep=!0;const u=n(s);fetch(s.href,u)}})();function J(e){return`tapps/${e}`}function de(e,t){sessionStorage.setItem(J(e),JSON.stringify(t))}function ye(e){const t=sessionStorage.getItem(J(e));try{return t?JSON.parse(t):void 0}catch{}}function Y(e){return{lang:(e==null?void 0:e.lang)??void 0,message:e==null?void 0:e.message,abortEarly:(e==null?void 0:e.abortEarly)??void 0,abortPipeEarly:(e==null?void 0:e.abortPipeEarly)??void 0}}function he(e,t){var n;return(n=void 0)==null?void 0:n.get(t)}function ve(e){var t,n;const r=typeof e;return r==="string"?`"${e}"`:r==="number"||r==="bigint"||r==="boolean"?`${e}`:r==="object"||r==="function"?(e&&((n=(t=Object.getPrototypeOf(e))==null?void 0:t.constructor)==null?void 0:n.name))??"null":r}function y(e,t,n,r,s){const u=s&&"input"in s?s.input:n.value,i=(s==null?void 0:s.expected)??e.expects??null,a=(s==null?void 0:s.received)??ve(u),o={kind:e.kind,type:e.type,input:u,expected:i,received:a,message:`Invalid ${t}: ${i?`Expected ${i} but r`:"R"}eceived ${a}`,requirement:e.requirement,path:s==null?void 0:s.path,issues:s==null?void 0:s.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},c=e.kind==="schema",l=(s==null?void 0:s.message)??e.message??he(e.reference,o.lang)??(c?(o.lang,void 0):null)??r.message??(o.lang,void 0);l&&(o.message=typeof l=="function"?l(o):l),c&&(n.typed=!1),n.issues?n.issues.push(o):n.issues=[o]}function h(e){return{version:1,vendor:"valibot",validate(t){return e["~run"]({value:t},Y())}}}function H(e,t){return Object.hasOwn(e,t)&&t!=="__proto__"&&t!=="prototype"&&t!=="constructor"}function me(e,t){const n=[...new Set(e)];return n.length>1?`(${n.join(` ${t} `)})`:n[0]??"never"}var ge=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function K(e,t){return{kind:"validation",type:"check",reference:K,async:!1,expects:null,requirement:e,message:t,"~run"(n,r){return n.typed&&!this.requirement(n.value)&&y(this,"input",n,r),n}}}function Q(e){return{kind:"validation",type:"integer",reference:Q,async:!1,expects:null,requirement:Number.isInteger,message:e,"~run"(t,n){return t.typed&&!this.requirement(t.value)&&y(this,"integer",t,n),t}}}function g(e){return{kind:"transformation",type:"transform",reference:g,async:!1,operation:e,"~run"(t){return t.value=this.operation(t.value),t}}}function X(e,t,n){return typeof e.default=="function"?e.default(t,n):e.default}function be(e,t){return!e["~run"]({value:t},{abortEarly:!0}).issues}function $(e){return{kind:"schema",type:"boolean",reference:$,expects:"boolean",async:!1,message:e,get"~standard"(){return h(this)},"~run"(t,n){return typeof t.value=="boolean"?t.typed=!0:y(this,"type",t,n),t}}}function Z(e){return{kind:"schema",type:"date",reference:Z,expects:"Date",async:!1,message:e,get"~standard"(){return h(this)},"~run"(t,n){return t.value instanceof Date?isNaN(t.value)?y(this,"type",t,n,{received:'"Invalid Date"'}):t.typed=!0:y(this,"type",t,n),t}}}function ee(e,t){return{kind:"schema",type:"instance",reference:ee,expects:e.name,async:!1,class:e,message:t,get"~standard"(){return h(this)},"~run"(n,r){return n.value instanceof this.class?n.typed=!0:y(this,"type",n,r),n}}}function I(e){return{kind:"schema",type:"lazy",reference:I,expects:"unknown",async:!1,getter:e,get"~standard"(){return h(this)},"~run"(t,n){return this.getter(t.value)["~run"](t,n)}}}function j(e,t){return{kind:"schema",type:"loose_object",reference:j,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return h(this)},"~run"(n,r){var s;const u=n.value;if(u&&typeof u=="object"){n.typed=!0,n.value={};for(const i in this.entries){const a=this.entries[i];if(i in u||(a.type==="exact_optional"||a.type==="optional"||a.type==="nullish")&&a.default!==void 0){const o=i in u?u[i]:X(a),c=a["~run"]({value:o},r);if(c.issues){const l={type:"object",origin:"value",input:u,key:i,value:o};for(const d of c.issues)d.path?d.path.unshift(l):d.path=[l],(s=n.issues)==null||s.push(d);if(n.issues||(n.issues=c.issues),r.abortEarly){n.typed=!1;break}}c.typed||(n.typed=!1),n.value[i]=c.value}else if(a.type!=="exact_optional"&&a.type!=="optional"&&a.type!=="nullish"&&(y(this,"key",n,r,{input:void 0,expected:`"${i}"`,path:[{type:"object",origin:"key",input:u,key:i,value:u[i]}]}),r.abortEarly))break}if(!n.issues||!r.abortEarly)for(const i in u)H(u,i)&&!(i in this.entries)&&(n.value[i]=u[i])}else y(this,"type",n,r);return n}}}function N(e){return{kind:"schema",type:"number",reference:N,expects:"number",async:!1,message:e,get"~standard"(){return h(this)},"~run"(t,n){return typeof t.value=="number"&&!isNaN(t.value)?t.typed=!0:y(this,"type",t,n),t}}}function f(e,t){return{kind:"schema",type:"optional",reference:f,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return h(this)},"~run"(n,r){return n.value===void 0&&(this.default!==void 0&&(n.value=X(this,n,r)),n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,r)}}}function te(e,t,n){return{kind:"schema",type:"record",reference:te,expects:"Object",async:!1,key:e,value:t,message:n,get"~standard"(){return h(this)},"~run"(r,s){var u,i;const a=r.value;if(a&&typeof a=="object"){r.typed=!0,r.value={};for(const o in a)if(H(a,o)){const c=a[o],l=this.key["~run"]({value:o},s);if(l.issues){const P={type:"object",origin:"key",input:a,key:o,value:c};for(const k of l.issues)k.path=[P],(u=r.issues)==null||u.push(k);if(r.issues||(r.issues=l.issues),s.abortEarly){r.typed=!1;break}}const d=this.value["~run"]({value:c},s);if(d.issues){const P={type:"object",origin:"value",input:a,key:o,value:c};for(const k of d.issues)k.path?k.path.unshift(P):k.path=[P],(i=r.issues)==null||i.push(k);if(r.issues||(r.issues=d.issues),s.abortEarly){r.typed=!1;break}}(!l.typed||!d.typed)&&(r.typed=!1),l.typed&&(r.value[l.value]=d.value)}}else y(this,"type",r,s);return r}}}function p(e){return{kind:"schema",type:"string",reference:p,expects:"string",async:!1,message:e,get"~standard"(){return h(this)},"~run"(t,n){return typeof t.value=="string"?t.typed=!0:y(this,"type",t,n),t}}}function M(e){let t;if(e)for(const n of e)t?t.push(...n.issues):t=n.issues;return t}function ne(e,t){return{kind:"schema",type:"union",reference:ne,expects:me(e.map(n=>n.expects),"|"),async:!1,options:e,message:t,get"~standard"(){return h(this)},"~run"(n,r){let s,u,i;for(const a of this.options){const o=a["~run"]({value:n.value},r);if(o.typed)if(o.issues)u?u.push(o):u=[o];else{s=o;break}else i?i.push(o):i=[o]}if(s)return s;if(u){if(u.length===1)return u[0];y(this,"type",n,r,{issues:M(u)}),n.typed=!0}else{if((i==null?void 0:i.length)===1)return i[0];y(this,"type",n,r,{issues:M(i)})}return n}}}function ke(e,t,n){const r=e["~run"]({value:t},Y(n));if(r.issues)throw new ge(r.issues);return r.value}function E(...e){return{...e[0],pipe:e,get"~standard"(){return h(this)},"~run"(t,n){for(const r of e)if(r.kind!=="metadata"){if(t.issues&&(r.kind==="schema"||r.kind==="transformation")){t.typed=!1;break}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=r["~run"](t,n))}return t}}}function Ee(e){return e.replace(/_[a-z]/g,t=>t[1].toUpperCase())}function xe(e){return Object.entries(e).reduce((t,[n,r])=>(t[Ee(n)]=r,t),{})}function q(e){const t=xe(e);for(const n in t){const r=t[n];r&&typeof r=="object"&&!(r instanceof Date)&&(t[n]=Array.isArray(r)?r.map(q):q(r))}return t}function re(e){return g(t=>e?q(t):t)}function se(e){return t=>E(e,re(t))}function _e(){return g(JSON.parse)}function L(e){const t=se(e);return n=>E(p(),_e(),t(n))}function $e(e){return g(t=>{const n={};return new URLSearchParams(t).forEach((r,s)=>{const u=n[s];Array.isArray(u)?u.push(r):u===void 0?n[s]=r:n[s]=[u,r]}),ke(e,n)})}function ie(e){return t=>E(ne([p(),ee(URLSearchParams)]),$e(e),re(t))}const W=f(I(()=>Ae())),we=j({id:N(),photo_url:f(p()),type:p(),title:p(),username:f(p())}),je=j({added_to_attachment_menu:f($()),allows_write_to_pm:f($()),first_name:p(),id:N(),is_bot:f($()),is_premium:f($()),last_name:f(p()),language_code:f(p()),photo_url:f(p()),username:f(p())}),Pe=j({auth_date:E(p(),g(e=>new Date(Number(e)*1e3)),Z()),can_send_after:f(E(p(),g(Number),Q())),chat:f(I(()=>Oe())),chat_type:f(p()),chat_instance:f(p()),hash:p(),query_id:f(p()),receiver:W,start_param:f(p()),signature:p(),user:W}),Oe=L(we),Ae=L(je),De=ie(Pe);function Se(e){return/^#[\da-f]{6}$/i.test(e)}const Te=se(te(p(),E(p(),K(Se),g(e=>e)))),A=f(E(p(),g(e=>e==="1"))),U=L(Te()),qe=j({tgWebAppBotInline:A,tgWebAppData:f(De()),tgWebAppDefaultColors:f(U()),tgWebAppFullscreen:A,tgWebAppPlatform:p(),tgWebAppShowSettings:A,tgWebAppStartParam:f(p()),tgWebAppThemeParams:U(),tgWebAppVersion:p()}),Ie=ie(qe);function Ne(e){try{return be(Ie(),e)}catch{return!1}}function Le(e){return t=>t instanceof e}function _(e,t){t||(t=[]);class n extends Error{constructor(...s){const u=typeof t=="function"?t(...s):typeof t=="string"?[t]:t||[];super(...u),this.name=e}}return Object.defineProperty(n,"name",{value:e}),[n,Le(n)]}_("MethodUnsupportedError",(e,t)=>[`Method "${e}" is unsupported in Mini Apps version ${t}`]);_("MethodParameterUnsupportedError",(e,t,n)=>[`Parameter "${t}" of "${e}" method is unsupported in Mini Apps version ${n}`]);const Re=["Unable to retrieve launch parameters from any known source. Perhaps, you have opened your app outside Telegram?","ðŸ“– Refer to docs for more information:","https://docs.telegram-mini-apps.com/packages/telegram-apps-bridge/environment"].join(`
`),[Me,Ke]=_("LaunchParamsRetrieveError",Re);_("InvalidLaunchParamsError",e=>[`Invalid value for launch params: ${e}`]);_("UnknownEnvError");_("InvokeCustomMethodError",e=>[`Server returned error: ${e}`]);const C="launchParams";function V(e){return e.replace(/^[^?#]*[?#]/,"").replace(/[?#]/g,"&")}function We(){for(const e of[()=>V(window.location.href),()=>{const t=performance.getEntriesByType("navigation")[0];return t&&V(t.name)},()=>ye(C)]){const t=e();if(t&&Ne(t))return de(C,t),t}throw new Me}function Ue(){return new URLSearchParams(We()).get("tgWebAppData")||void 0}var v;function ue(e){return{lang:(e==null?void 0:e.lang)??(v==null?void 0:v.lang),message:e==null?void 0:e.message,abortEarly:(e==null?void 0:e.abortEarly)??(v==null?void 0:v.abortEarly),abortPipeEarly:(e==null?void 0:e.abortPipeEarly)??(v==null?void 0:v.abortPipeEarly)}}var D;function Ce(e){return D==null?void 0:D.get(e)}var S;function Ve(e){return S==null?void 0:S.get(e)}var T;function Be(e,t){var n;return(n=T==null?void 0:T.get(e))==null?void 0:n.get(t)}function ze(e){var n,r;const t=typeof e;return t==="string"?`"${e}"`:t==="number"||t==="bigint"||t==="boolean"?`${e}`:t==="object"||t==="function"?(e&&((r=(n=Object.getPrototypeOf(e))==null?void 0:n.constructor)==null?void 0:r.name))??"null":t}function x(e,t,n,r,s){const u=s&&"input"in s?s.input:n.value,i=(s==null?void 0:s.expected)??e.expects??null,a=(s==null?void 0:s.received)??ze(u),o={kind:e.kind,type:e.type,input:u,expected:i,received:a,message:`Invalid ${t}: ${i?`Expected ${i} but r`:"R"}eceived ${a}`,requirement:e.requirement,path:s==null?void 0:s.path,issues:s==null?void 0:s.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},c=e.kind==="schema",l=(s==null?void 0:s.message)??e.message??Be(e.reference,o.lang)??(c?Ve(o.lang):null)??r.message??Ce(o.lang);l&&(o.message=typeof l=="function"?l(o):l),c&&(n.typed=!1),n.issues?n.issues.push(o):n.issues=[o]}function b(e){return{version:1,vendor:"valibot",validate(t){return e["~run"]({value:t},ue())}}}function Fe(e,t){return Object.hasOwn(e,t)&&t!=="__proto__"&&t!=="prototype"&&t!=="constructor"}var Ge=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function ae(e){return{kind:"transformation",type:"transform",reference:ae,async:!1,operation:e,"~run"(t){return t.value=this.operation(t.value),t}}}function Je(e,t,n){return typeof e.fallback=="function"?e.fallback(t,n):e.fallback}function R(e,t,n){return typeof e.default=="function"?e.default(t,n):e.default}function oe(e,t){return{kind:"schema",type:"array",reference:oe,expects:"Array",async:!1,item:e,message:t,get"~standard"(){return b(this)},"~run"(n,r){var u;const s=n.value;if(Array.isArray(s)){n.typed=!0,n.value=[];for(let i=0;i<s.length;i++){const a=s[i],o=this.item["~run"]({value:a},r);if(o.issues){const c={type:"array",origin:"value",input:s,key:i,value:a};for(const l of o.issues)l.path?l.path.unshift(c):l.path=[c],(u=n.issues)==null||u.push(l);if(n.issues||(n.issues=o.issues),r.abortEarly){n.typed=!1;break}}o.typed||(n.typed=!1),n.value.push(o.value)}}else x(this,"type",n,r);return n}}}function le(e){return{kind:"schema",type:"date",reference:le,expects:"Date",async:!1,message:e,get"~standard"(){return b(this)},"~run"(t,n){return t.value instanceof Date?isNaN(t.value)?x(this,"type",t,n,{received:'"Invalid Date"'}):t.typed=!0:x(this,"type",t,n),t}}}function m(e,t){return{kind:"schema",type:"loose_object",reference:m,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return b(this)},"~run"(n,r){var u;const s=n.value;if(s&&typeof s=="object"){n.typed=!0,n.value={};for(const i in this.entries){const a=this.entries[i];if(i in s||(a.type==="exact_optional"||a.type==="optional"||a.type==="nullish")&&a.default!==void 0){const o=i in s?s[i]:R(a),c=a["~run"]({value:o},r);if(c.issues){const l={type:"object",origin:"value",input:s,key:i,value:o};for(const d of c.issues)d.path?d.path.unshift(l):d.path=[l],(u=n.issues)==null||u.push(d);if(n.issues||(n.issues=c.issues),r.abortEarly){n.typed=!1;break}}c.typed||(n.typed=!1),n.value[i]=c.value}else if(a.fallback!==void 0)n.value[i]=Je(a);else if(a.type!=="exact_optional"&&a.type!=="optional"&&a.type!=="nullish"&&(x(this,"key",n,r,{input:void 0,expected:`"${i}"`,path:[{type:"object",origin:"key",input:s,key:i,value:s[i]}]}),r.abortEarly))break}if(!n.issues||!r.abortEarly)for(const i in s)Fe(s,i)&&!(i in this.entries)&&(n.value[i]=s[i])}else x(this,"type",n,r);return n}}}function ce(e,t){return{kind:"schema",type:"nullable",reference:ce,expects:`(${e.expects} | null)`,async:!1,wrapped:e,default:t,get"~standard"(){return b(this)},"~run"(n,r){return n.value===null&&(this.default!==void 0&&(n.value=R(this,n,r)),n.value===null)?(n.typed=!0,n):this.wrapped["~run"](n,r)}}}function pe(e,t){return{kind:"schema",type:"optional",reference:pe,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return b(this)},"~run"(n,r){return n.value===void 0&&(this.default!==void 0&&(n.value=R(this,n,r)),n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,r)}}}function w(e){return{kind:"schema",type:"string",reference:w,expects:"string",async:!1,message:e,get"~standard"(){return b(this)},"~run"(t,n){return typeof t.value=="string"?t.typed=!0:x(this,"type",t,n),t}}}function fe(){return{kind:"schema",type:"unknown",reference:fe,expects:"unknown",async:!1,get"~standard"(){return b(this)},"~run"(e){return e.typed=!0,e}}}function B(e,t,n){const r=e["~run"]({value:t},ue(n));if(r.issues)throw new Ge(r.issues);return r.value}function Ye(...e){return{...e[0],pipe:e,get"~standard"(){return b(this)},"~run"(t,n){for(const r of e)if(r.kind!=="metadata"){if(t.issues&&(r.kind==="schema"||r.kind==="transformation")){t.typed=!1;break}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=r["~run"](t,n))}return t}}}function z(e){return pe(ce(e))}const He=m({data:fe(),errors:z(oe(m({message:z(w()),extensions:m({errorData:m({code:w()})})})))});function O(e){return[!1,e]}async function F(e,t,n,r,s){async function u(){let a;try{a=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`jwt ${(s||{}).authToken}`},body:JSON.stringify({query:t,variables:n})})}catch(l){return O(["fetch",l])}let o,c;if((a.headers.get("content-type")||"").includes("application/json")&&(o=await a.json().then(l=>B(He,l)).catch(l=>{c=l})),!o)return O(a.ok?["invalid-data",c]:["http",a.status,a.statusText]);if(o.errors)return O(["gql",o.errors.map(l=>({code:l.extensions.errorData.code,message:l.message||void 0}))]);try{return[!0,B(r,o.data)]}catch(l){return O(["invalid-data",l])}}const i=3;for(let a=0;a<i;a++){const o=await u();if(o[0]||a===i-1)return o;await new Promise(c=>{setTimeout(c,Math.pow(2,a+3)*100)})}return null}function G(e){return e[0]==="http"?`Request failed with status ${e[1]}: ${e[2]}`:e[0]==="fetch"?`Request failed: ${e[1].message}`:e[0]==="invalid-data"?`Unexpected response received: ${e[1].message}`:`Server returned GraphQL errors: ${e[1].map(t=>`${t.code}${t.message?` (${t.message})`:""}`).join(", ")}`}(async()=>{const e=document.getElementById("title"),t="https://mini-apps.store/gql",n=await F(t,"mutation Authenticate($initData: String!) { authenticateTelegram(initData: $initData) {  token  expiresAt }}",{initData:Ue()},m({authenticateTelegram:m({token:w(),expiresAt:Ye(w(),ae(u=>new Date(u)),le())})}));if(!n[0]){e.innerText=G(n[1]);return}const{token:r}=n[1].authenticateTelegram,s=await F(t,"query CheckAccess { currentUser {  apps { role } }}",{},m({}),{authToken:r});if(!s[0]){const[,u]=s;let i;u[0]==="gql"&&u[1].some(a=>a.code==="ERR_NOT_ALLOWED")?i="You are not recognized as a beta tester":i=G(u),e.innerText=i;return}e.innerText="Your access token:",document.getElementById("token").innerText=r})();
