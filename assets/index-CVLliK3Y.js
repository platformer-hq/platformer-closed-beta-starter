(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const u of s)if(u.type==="childList")for(const i of u.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const u={};return s.integrity&&(u.integrity=s.integrity),s.referrerPolicy&&(u.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?u.credentials="include":s.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(s){if(s.ep)return;s.ep=!0;const u=n(s);fetch(s.href,u)}})();function ke(e){return{lang:(e==null?void 0:e.lang)??void 0,message:e==null?void 0:e.message,abortEarly:(e==null?void 0:e.abortEarly)??void 0,abortPipeEarly:(e==null?void 0:e.abortPipeEarly)??void 0}}function Ee(e,t){var n;return(n=void 0)==null?void 0:n.get(t)}function xe(e){var t,n;const r=typeof e;return r==="string"?`"${e}"`:r==="number"||r==="bigint"||r==="boolean"?`${e}`:r==="object"||r==="function"?(e&&((n=(t=Object.getPrototypeOf(e))==null?void 0:t.constructor)==null?void 0:n.name))??"null":r}function N(e,t,n,r,s){const u=s&&"input"in s?s.input:n.value,i=(s==null?void 0:s.expected)??e.expects??null,a=(s==null?void 0:s.received)??xe(u),o={kind:e.kind,type:e.type,input:u,expected:i,received:a,message:`Invalid ${t}: ${i?`Expected ${i} but r`:"R"}eceived ${a}`,requirement:e.requirement,path:s==null?void 0:s.path,issues:s==null?void 0:s.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},c=e.kind==="schema",l=(s==null?void 0:s.message)??e.message??Ee(e.reference,o.lang)??(c?(o.lang,void 0):null)??r.message??(o.lang,void 0);l&&(o.message=typeof l=="function"?l(o):l),c&&(n.typed=!1),n.issues?n.issues.push(o):n.issues=[o]}function Q(e){return{version:1,vendor:"valibot",validate(t){return e["~run"]({value:t},ke())}}}function $e(e,t){return Object.hasOwn(e,t)&&t!=="__proto__"&&t!=="prototype"&&t!=="constructor"}function we(e,t,n){return typeof e.default=="function"?e.default(t,n):e.default}function X(e,t){return!e["~run"]({value:t},{abortEarly:!0}).issues}function R(e){return{kind:"schema",type:"function",reference:R,expects:"Function",async:!1,message:e,get"~standard"(){return Q(this)},"~run"(t,n){return typeof t.value=="function"?t.typed=!0:N(this,"type",t,n),t}}}function j(e,t){return{kind:"schema",type:"loose_object",reference:j,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return Q(this)},"~run"(n,r){var s;const u=n.value;if(u&&typeof u=="object"){n.typed=!0,n.value={};for(const i in this.entries){const a=this.entries[i];if(i in u||(a.type==="exact_optional"||a.type==="optional"||a.type==="nullish")&&a.default!==void 0){const o=i in u?u[i]:we(a),c=a["~run"]({value:o},r);if(c.issues){const l={type:"object",origin:"value",input:u,key:i,value:o};for(const p of c.issues)p.path?p.path.unshift(l):p.path=[l],(s=n.issues)==null||s.push(p);if(n.issues||(n.issues=c.issues),r.abortEarly){n.typed=!1;break}}c.typed||(n.typed=!1),n.value[i]=c.value}else if(a.type!=="exact_optional"&&a.type!=="optional"&&a.type!=="nullish"&&(N(this,"key",n,r,{input:void 0,expected:`"${i}"`,path:[{type:"object",origin:"key",input:u,key:i,value:u[i]}]}),r.abortEarly))break}if(!n.issues||!r.abortEarly)for(const i in u)$e(u,i)&&!(i in this.entries)&&(n.value[i]=u[i])}else N(this,"type",n,r);return n}}}function _e(e){return X(j({TelegramWebviewProxy:j({postEvent:R()})}),e)}function je(){try{return window.self!==window.top}catch{return!0}}function ee(e){return`tapps/${e}`}function Pe(e,t){sessionStorage.setItem(ee(e),JSON.stringify(t))}function Oe(e){const t=sessionStorage.getItem(ee(e));try{return t?JSON.parse(t):void 0}catch{}}function Ae(e,t){t||(t={});const{textColor:n,bgColor:r,shouldLog:s}=t,u=s===void 0?!0:s,i=typeof u=="boolean"?()=>u:u;function a(o,c,...l){if(c||i()){const p="font-weight:bold;padding:0 5px;border-radius:5px";console[o](`%c${Intl.DateTimeFormat("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3,timeZone:"UTC"}).format(new Date)}%c / %c${e}`,`${p};background-color: lightblue;color:black`,"",`${p};${n?`color:${n};`:""}${r?`background-color:${r}`:""}`,...l)}}return[a.bind(void 0,"log"),a.bind(void 0,"error")]}function te(e){return{lang:(e==null?void 0:e.lang)??void 0,message:e==null?void 0:e.message,abortEarly:(e==null?void 0:e.abortEarly)??void 0,abortPipeEarly:(e==null?void 0:e.abortPipeEarly)??void 0}}function De(e,t){var n;return(n=void 0)==null?void 0:n.get(t)}function Se(e){var t,n;const r=typeof e;return r==="string"?`"${e}"`:r==="number"||r==="bigint"||r==="boolean"?`${e}`:r==="object"||r==="function"?(e&&((n=(t=Object.getPrototypeOf(e))==null?void 0:t.constructor)==null?void 0:n.name))??"null":r}function y(e,t,n,r,s){const u=s&&"input"in s?s.input:n.value,i=(s==null?void 0:s.expected)??e.expects??null,a=(s==null?void 0:s.received)??Se(u),o={kind:e.kind,type:e.type,input:u,expected:i,received:a,message:`Invalid ${t}: ${i?`Expected ${i} but r`:"R"}eceived ${a}`,requirement:e.requirement,path:s==null?void 0:s.path,issues:s==null?void 0:s.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},c=e.kind==="schema",l=(s==null?void 0:s.message)??e.message??De(e.reference,o.lang)??(c?(o.lang,void 0):null)??r.message??(o.lang,void 0);l&&(o.message=typeof l=="function"?l(o):l),c&&(n.typed=!1),n.issues?n.issues.push(o):n.issues=[o]}function v(e){return{version:1,vendor:"valibot",validate(t){return e["~run"]({value:t},te())}}}function ne(e,t){return Object.hasOwn(e,t)&&t!=="__proto__"&&t!=="prototype"&&t!=="constructor"}function Te(e,t){const n=[...new Set(e)];return n.length>1?`(${n.join(` ${t} `)})`:n[0]??"never"}var qe=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function re(e,t){return{kind:"validation",type:"check",reference:re,async:!1,expects:null,requirement:e,message:t,"~run"(n,r){return n.typed&&!this.requirement(n.value)&&y(this,"input",n,r),n}}}function se(e){return{kind:"validation",type:"integer",reference:se,async:!1,expects:null,requirement:Number.isInteger,message:e,"~run"(t,n){return t.typed&&!this.requirement(t.value)&&y(this,"integer",t,n),t}}}function k(e){return{kind:"transformation",type:"transform",reference:k,async:!1,operation:e,"~run"(t){return t.value=this.operation(t.value),t}}}function ie(e,t,n){return typeof e.default=="function"?e.default(t,n):e.default}function Ie(e,t){return!e["~run"]({value:t},{abortEarly:!0}).issues}function _(e){return{kind:"schema",type:"boolean",reference:_,expects:"boolean",async:!1,message:e,get"~standard"(){return v(this)},"~run"(t,n){return typeof t.value=="boolean"?t.typed=!0:y(this,"type",t,n),t}}}function ue(e){return{kind:"schema",type:"date",reference:ue,expects:"Date",async:!1,message:e,get"~standard"(){return v(this)},"~run"(t,n){return t.value instanceof Date?isNaN(t.value)?y(this,"type",t,n,{received:'"Invalid Date"'}):t.typed=!0:y(this,"type",t,n),t}}}function ae(e,t){return{kind:"schema",type:"instance",reference:ae,expects:e.name,async:!1,class:e,message:t,get"~standard"(){return v(this)},"~run"(n,r){return n.value instanceof this.class?n.typed=!0:y(this,"type",n,r),n}}}function M(e){return{kind:"schema",type:"lazy",reference:M,expects:"unknown",async:!1,getter:e,get"~standard"(){return v(this)},"~run"(t,n){return this.getter(t.value)["~run"](t,n)}}}function O(e,t){return{kind:"schema",type:"loose_object",reference:O,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return v(this)},"~run"(n,r){var s;const u=n.value;if(u&&typeof u=="object"){n.typed=!0,n.value={};for(const i in this.entries){const a=this.entries[i];if(i in u||(a.type==="exact_optional"||a.type==="optional"||a.type==="nullish")&&a.default!==void 0){const o=i in u?u[i]:ie(a),c=a["~run"]({value:o},r);if(c.issues){const l={type:"object",origin:"value",input:u,key:i,value:o};for(const p of c.issues)p.path?p.path.unshift(l):p.path=[l],(s=n.issues)==null||s.push(p);if(n.issues||(n.issues=c.issues),r.abortEarly){n.typed=!1;break}}c.typed||(n.typed=!1),n.value[i]=c.value}else if(a.type!=="exact_optional"&&a.type!=="optional"&&a.type!=="nullish"&&(y(this,"key",n,r,{input:void 0,expected:`"${i}"`,path:[{type:"object",origin:"key",input:u,key:i,value:u[i]}]}),r.abortEarly))break}if(!n.issues||!r.abortEarly)for(const i in u)ne(u,i)&&!(i in this.entries)&&(n.value[i]=u[i])}else y(this,"type",n,r);return n}}}function W(e){return{kind:"schema",type:"number",reference:W,expects:"number",async:!1,message:e,get"~standard"(){return v(this)},"~run"(t,n){return typeof t.value=="number"&&!isNaN(t.value)?t.typed=!0:y(this,"type",t,n),t}}}function d(e,t){return{kind:"schema",type:"optional",reference:d,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return v(this)},"~run"(n,r){return n.value===void 0&&(this.default!==void 0&&(n.value=ie(this,n,r)),n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,r)}}}function oe(e,t,n){return{kind:"schema",type:"record",reference:oe,expects:"Object",async:!1,key:e,value:t,message:n,get"~standard"(){return v(this)},"~run"(r,s){var u,i;const a=r.value;if(a&&typeof a=="object"){r.typed=!0,r.value={};for(const o in a)if(ne(a,o)){const c=a[o],l=this.key["~run"]({value:o},s);if(l.issues){const h={type:"object",origin:"key",input:a,key:o,value:c};for(const g of l.issues)g.path=[h],(u=r.issues)==null||u.push(g);if(r.issues||(r.issues=l.issues),s.abortEarly){r.typed=!1;break}}const p=this.value["~run"]({value:c},s);if(p.issues){const h={type:"object",origin:"value",input:a,key:o,value:c};for(const g of p.issues)g.path?g.path.unshift(h):g.path=[h],(i=r.issues)==null||i.push(g);if(r.issues||(r.issues=p.issues),s.abortEarly){r.typed=!1;break}}(!l.typed||!p.typed)&&(r.typed=!1),l.typed&&(r.value[l.value]=p.value)}}else y(this,"type",r,s);return r}}}function f(e){return{kind:"schema",type:"string",reference:f,expects:"string",async:!1,message:e,get"~standard"(){return v(this)},"~run"(t,n){return typeof t.value=="string"?t.typed=!0:y(this,"type",t,n),t}}}function J(e){let t;if(e)for(const n of e)t?t.push(...n.issues):t=n.issues;return t}function le(e,t){return{kind:"schema",type:"union",reference:le,expects:Te(e.map(n=>n.expects),"|"),async:!1,options:e,message:t,get"~standard"(){return v(this)},"~run"(n,r){let s,u,i;for(const a of this.options){const o=a["~run"]({value:n.value},r);if(o.typed)if(o.issues)u?u.push(o):u=[o];else{s=o;break}else i?i.push(o):i=[o]}if(s)return s;if(u){if(u.length===1)return u[0];y(this,"type",n,r,{issues:J(u)}),n.typed=!0}else{if((i==null?void 0:i.length)===1)return i[0];y(this,"type",n,r,{issues:J(i)})}return n}}}function Ne(e,t,n){const r=e["~run"]({value:t},te(n));if(r.issues)throw new qe(r.issues);return r.value}function x(...e){return{...e[0],pipe:e,get"~standard"(){return v(this)},"~run"(t,n){for(const r of e)if(r.kind!=="metadata"){if(t.issues&&(r.kind==="schema"||r.kind==="transformation")){t.typed=!1;break}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=r["~run"](t,n))}return t}}}function Le(e){return e.replace(/_[a-z]/g,t=>t[1].toUpperCase())}function Re(e){return Object.entries(e).reduce((t,[n,r])=>(t[Le(n)]=r,t),{})}function L(e){const t=Re(e);for(const n in t){const r=t[n];r&&typeof r=="object"&&!(r instanceof Date)&&(t[n]=Array.isArray(r)?r.map(L):L(r))}return t}function ce(e){return k(t=>e?L(t):t)}function pe(e){return t=>x(e,ce(t))}function Me(){return k(JSON.parse)}function U(e){const t=pe(e);return n=>x(f(),Me(),t(n))}function We(e){return k(t=>{const n={};return new URLSearchParams(t).forEach((r,s)=>{const u=n[s];Array.isArray(u)?u.push(r):u===void 0?n[s]=r:n[s]=[u,r]}),Ne(e,n)})}function fe(e){return t=>x(le([f(),ae(URLSearchParams)]),We(e),ce(t))}const F=d(M(()=>Fe())),Ue=O({id:W(),photo_url:d(f()),type:f(),title:f(),username:d(f())}),Ce=O({added_to_attachment_menu:d(_()),allows_write_to_pm:d(_()),first_name:f(),id:W(),is_bot:d(_()),is_premium:d(_()),last_name:d(f()),language_code:d(f()),photo_url:d(f()),username:d(f())}),Be=O({auth_date:x(f(),k(e=>new Date(Number(e)*1e3)),ue()),can_send_after:d(x(f(),k(Number),se())),chat:d(M(()=>Je())),chat_type:d(f()),chat_instance:d(f()),hash:f(),query_id:d(f()),receiver:F,start_param:d(f()),signature:f(),user:F}),Je=U(Ue),Fe=U(Ce),Ve=fe(Be);function Ge(e){return/^#[\da-f]{6}$/i.test(e)}const ze=pe(oe(f(),x(f(),re(Ge),k(e=>e)))),D=d(x(f(),k(e=>e==="1"))),V=U(ze()),Ze=O({tgWebAppBotInline:D,tgWebAppData:d(Ve()),tgWebAppDefaultColors:d(V()),tgWebAppFullscreen:D,tgWebAppPlatform:f(),tgWebAppShowSettings:D,tgWebAppStartParam:d(f()),tgWebAppThemeParams:V(),tgWebAppVersion:f()}),Ye=fe(Ze);function He(e){try{return Ie(Ye(),e)}catch{return!1}}let Ke=!1;const[Qe,bt]=Ae("Bridge",{bgColor:"#9147ff",textColor:"white",shouldLog(){return Ke}});function Xe(e){return t=>t instanceof e}function w(e,t){t||(t=[]);class n extends Error{constructor(...s){const u=typeof t=="function"?t(...s):typeof t=="string"?[t]:t||[];super(...u),this.name=e}}return Object.defineProperty(n,"name",{value:e}),[n,Xe(n)]}w("MethodUnsupportedError",(e,t)=>[`Method "${e}" is unsupported in Mini Apps version ${t}`]);w("MethodParameterUnsupportedError",(e,t,n)=>[`Parameter "${t}" of "${e}" method is unsupported in Mini Apps version ${n}`]);const et=["Unable to retrieve launch parameters from any known source. Perhaps, you have opened your app outside Telegram?","📖 Refer to docs for more information:","https://docs.telegram-mini-apps.com/packages/telegram-apps-bridge/environment"].join(`
`),[tt,kt]=w("LaunchParamsRetrieveError",et);w("InvalidLaunchParamsError",e=>[`Invalid value for launch params: ${e}`]);const[nt,Et]=w("UnknownEnvError");w("InvokeCustomMethodError",e=>[`Server returned error: ${e}`]);function rt(e,t){t()}function st(e,t){t||(t={});const n=t.equals||Object.is;let r=[],s=e;const u=c=>{if(!n(s,c)){const l=s;s=c,rt(o,()=>{[...r].forEach(([p,h])=>{p(c,l),h&&a(p,!0)})})}};function i(c){const l=typeof c!="object"?{once:c}:c;return{once:l.once||!1,signal:l.signal||!1}}const a=(c,l)=>{const p=i(l),h=r.findIndex(([g,B])=>g===c&&B.once===p.once&&B.signal===p.signal);h>=0&&r.splice(h,1)},o=Object.assign(function(){return it(o),s},{destroy(){r=[]},set:u,reset(){u(e)},sub(c,l){return r.push([c,i(l)]),()=>a(c,l)},unsub:a,unsubAll(){r=r.filter(c=>c[1].signal)}});return o}const S=[];function it(e){S.length&&S[S.length-1].add(e)}const ut=st("https://web.telegram.org");function at(e,t){Qe(!1,"Posting event:",{eventType:e});const n=window,r=JSON.stringify({eventType:e,eventData:t});if(je())return n.parent.postMessage(r,ut());if(_e(n)){n.TelegramWebviewProxy.postEvent(e,JSON.stringify(t));return}if(X(j({external:j({notify:R()})}),n)){n.external.notify(r);return}throw new nt}const G="launchParams";function z(e){return e.replace(/^[^?#]*[?#]/,"").replace(/[?#]/g,"&")}function ot(){for(const e of[()=>z(window.location.href),()=>{const t=performance.getEntriesByType("navigation")[0];return t&&z(t.name)},()=>Oe(G)]){const t=e();if(t&&He(t))return Pe(G,t),t}throw new tt}function lt(){return new URLSearchParams(ot()).get("tgWebAppData")||void 0}var m;function de(e){return{lang:(e==null?void 0:e.lang)??(m==null?void 0:m.lang),message:e==null?void 0:e.message,abortEarly:(e==null?void 0:e.abortEarly)??(m==null?void 0:m.abortEarly),abortPipeEarly:(e==null?void 0:e.abortPipeEarly)??(m==null?void 0:m.abortPipeEarly)}}var T;function ct(e){return T==null?void 0:T.get(e)}var q;function pt(e){return q==null?void 0:q.get(e)}var I;function ft(e,t){var n;return(n=I==null?void 0:I.get(e))==null?void 0:n.get(t)}function dt(e){var n,r;const t=typeof e;return t==="string"?`"${e}"`:t==="number"||t==="bigint"||t==="boolean"?`${e}`:t==="object"||t==="function"?(e&&((r=(n=Object.getPrototypeOf(e))==null?void 0:n.constructor)==null?void 0:r.name))??"null":t}function $(e,t,n,r,s){const u=s&&"input"in s?s.input:n.value,i=(s==null?void 0:s.expected)??e.expects??null,a=(s==null?void 0:s.received)??dt(u),o={kind:e.kind,type:e.type,input:u,expected:i,received:a,message:`Invalid ${t}: ${i?`Expected ${i} but r`:"R"}eceived ${a}`,requirement:e.requirement,path:s==null?void 0:s.path,issues:s==null?void 0:s.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},c=e.kind==="schema",l=(s==null?void 0:s.message)??e.message??ft(e.reference,o.lang)??(c?pt(o.lang):null)??r.message??ct(o.lang);l&&(o.message=typeof l=="function"?l(o):l),c&&(n.typed=!1),n.issues?n.issues.push(o):n.issues=[o]}function E(e){return{version:1,vendor:"valibot",validate(t){return e["~run"]({value:t},de())}}}function yt(e,t){return Object.hasOwn(e,t)&&t!=="__proto__"&&t!=="prototype"&&t!=="constructor"}var vt=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function ye(e){return{kind:"transformation",type:"transform",reference:ye,async:!1,operation:e,"~run"(t){return t.value=this.operation(t.value),t}}}function ht(e,t,n){return typeof e.fallback=="function"?e.fallback(t,n):e.fallback}function C(e,t,n){return typeof e.default=="function"?e.default(t,n):e.default}function ve(e,t){return{kind:"schema",type:"array",reference:ve,expects:"Array",async:!1,item:e,message:t,get"~standard"(){return E(this)},"~run"(n,r){var u;const s=n.value;if(Array.isArray(s)){n.typed=!0,n.value=[];for(let i=0;i<s.length;i++){const a=s[i],o=this.item["~run"]({value:a},r);if(o.issues){const c={type:"array",origin:"value",input:s,key:i,value:a};for(const l of o.issues)l.path?l.path.unshift(c):l.path=[c],(u=n.issues)==null||u.push(l);if(n.issues||(n.issues=o.issues),r.abortEarly){n.typed=!1;break}}o.typed||(n.typed=!1),n.value.push(o.value)}}else $(this,"type",n,r);return n}}}function he(e){return{kind:"schema",type:"date",reference:he,expects:"Date",async:!1,message:e,get"~standard"(){return E(this)},"~run"(t,n){return t.value instanceof Date?isNaN(t.value)?$(this,"type",t,n,{received:'"Invalid Date"'}):t.typed=!0:$(this,"type",t,n),t}}}function b(e,t){return{kind:"schema",type:"loose_object",reference:b,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return E(this)},"~run"(n,r){var u;const s=n.value;if(s&&typeof s=="object"){n.typed=!0,n.value={};for(const i in this.entries){const a=this.entries[i];if(i in s||(a.type==="exact_optional"||a.type==="optional"||a.type==="nullish")&&a.default!==void 0){const o=i in s?s[i]:C(a),c=a["~run"]({value:o},r);if(c.issues){const l={type:"object",origin:"value",input:s,key:i,value:o};for(const p of c.issues)p.path?p.path.unshift(l):p.path=[l],(u=n.issues)==null||u.push(p);if(n.issues||(n.issues=c.issues),r.abortEarly){n.typed=!1;break}}c.typed||(n.typed=!1),n.value[i]=c.value}else if(a.fallback!==void 0)n.value[i]=ht(a);else if(a.type!=="exact_optional"&&a.type!=="optional"&&a.type!=="nullish"&&($(this,"key",n,r,{input:void 0,expected:`"${i}"`,path:[{type:"object",origin:"key",input:s,key:i,value:s[i]}]}),r.abortEarly))break}if(!n.issues||!r.abortEarly)for(const i in s)yt(s,i)&&!(i in this.entries)&&(n.value[i]=s[i])}else $(this,"type",n,r);return n}}}function ge(e,t){return{kind:"schema",type:"nullable",reference:ge,expects:`(${e.expects} | null)`,async:!1,wrapped:e,default:t,get"~standard"(){return E(this)},"~run"(n,r){return n.value===null&&(this.default!==void 0&&(n.value=C(this,n,r)),n.value===null)?(n.typed=!0,n):this.wrapped["~run"](n,r)}}}function me(e,t){return{kind:"schema",type:"optional",reference:me,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return E(this)},"~run"(n,r){return n.value===void 0&&(this.default!==void 0&&(n.value=C(this,n,r)),n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,r)}}}function P(e){return{kind:"schema",type:"string",reference:P,expects:"string",async:!1,message:e,get"~standard"(){return E(this)},"~run"(t,n){return typeof t.value=="string"?t.typed=!0:$(this,"type",t,n),t}}}function be(){return{kind:"schema",type:"unknown",reference:be,expects:"unknown",async:!1,get"~standard"(){return E(this)},"~run"(e){return e.typed=!0,e}}}function Z(e,t,n){const r=e["~run"]({value:t},de(n));if(r.issues)throw new vt(r.issues);return r.value}function gt(...e){return{...e[0],pipe:e,get"~standard"(){return E(this)},"~run"(t,n){for(const r of e)if(r.kind!=="metadata"){if(t.issues&&(r.kind==="schema"||r.kind==="transformation")){t.typed=!1;break}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=r["~run"](t,n))}return t}}}function Y(e){return me(ge(e))}const mt=b({data:be(),errors:Y(ve(b({message:Y(P()),extensions:b({errorData:b({code:P()})})})))});function A(e){return[!1,e]}async function H(e,t,n,r,s){async function u(){let a;try{a=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`jwt ${(s||{}).authToken}`},body:JSON.stringify({query:t,variables:n})})}catch(l){return A(["fetch",l])}let o,c;if((a.headers.get("content-type")||"").includes("application/json")&&(o=await a.json().then(l=>Z(mt,l)).catch(l=>{c=l})),!o)return A(a.ok?["invalid-data",c]:["http",a.status,a.statusText]);if(o.errors)return A(["gql",o.errors.map(l=>({code:l.extensions.errorData.code,message:l.message||void 0}))]);try{return[!0,Z(r,o.data)]}catch(l){return A(["invalid-data",l])}}const i=3;for(let a=0;a<i;a++){const o=await u();if(o[0]||a===i-1)return o;await new Promise(c=>{setTimeout(c,Math.pow(2,a+3)*100)})}return null}function K(e){return e[0]==="http"?`Request failed with status ${e[1]}: ${e[2]}`:e[0]==="fetch"?`Request failed: ${e[1].message}`:e[0]==="invalid-data"?`Unexpected response received: ${e[1].message}`:`Server returned GraphQL errors: ${e[1].map(t=>`${t.code}${t.message?` (${t.message})`:""}`).join(", ")}`}(async()=>{at("web_app_ready");const e=document.getElementById("title"),t="https://mini-apps.store/gql",n=await H(t,"mutation Authenticate($initData: String!) { authenticateTelegram(initData: $initData) {  token  expiresAt }}",{initData:lt()},b({authenticateTelegram:b({token:P(),expiresAt:gt(P(),ye(u=>new Date(u)),he())})}));if(!n[0]){e.innerText=K(n[1]);return}const{token:r}=n[1].authenticateTelegram,s=await H(t,"query CheckAccess { currentUser {  apps { role } }}",{},b({}),{authToken:r});if(!s[0]){const[,u]=s;let i;u[0]==="gql"&&u[1].some(a=>a.code==="ERR_NOT_ALLOWED")?i="You are not recognized as a beta tester":i=K(u),e.innerText=i;return}e.innerText="Your access token:",document.getElementById("token").innerText=r})();
